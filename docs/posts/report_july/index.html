<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.333">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Milan Valášek">
<meta name="dcterms.date" content="2023-07-17">

<title>InfAR - Neufert 4.0 July 23 Progress Report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">InfAR</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Bauhaus-InfAR" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#motivation" id="toc-motivation" class="nav-link active" data-scroll-target="#motivation">Motivation</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#general-neural-network-architecture" id="toc-general-neural-network-architecture" class="nav-link" data-scroll-target="#general-neural-network-architecture">General neural network architecture</a></li>
  <li><a href="#hyperparameter-search" id="toc-hyperparameter-search" class="nav-link" data-scroll-target="#hyperparameter-search">Hyperparameter search</a></li>
  <li><a href="#best-model-architecture" id="toc-best-model-architecture" class="nav-link" data-scroll-target="#best-model-architecture">Best model architecture</a></li>
  <li><a href="#model-performance" id="toc-model-performance" class="nav-link" data-scroll-target="#model-performance">Model performance</a>
  <ul class="collapse">
  <li><a href="#does-the-apartment-have-a-loggia" id="toc-does-the-apartment-have-a-loggia" class="nav-link" data-scroll-target="#does-the-apartment-have-a-loggia">Does the apartment have a loggia?</a></li>
  <li><a href="#does-the-bathroom-have-a-window" id="toc-does-the-bathroom-have-a-window" class="nav-link" data-scroll-target="#does-the-bathroom-have-a-window">Does the bathroom have a window?</a></li>
  <li><a href="#number-of-rooms" id="toc-number-of-rooms" class="nav-link" data-scroll-target="#number-of-rooms">Number of rooms</a></li>
  <li><a href="#continuous-variables" id="toc-continuous-variables" class="nav-link" data-scroll-target="#continuous-variables">Continuous variables</a></li>
  <li><a href="#circulation-efficiency" id="toc-circulation-efficiency" class="nav-link" data-scroll-target="#circulation-efficiency">Circulation efficiency</a></li>
  <li><a href="#kitchen-living-room-distance-m" id="toc-kitchen-living-room-distance-m" class="nav-link" data-scroll-target="#kitchen-living-room-distance-m">Kitchen-living room distance (m)</a></li>
  <li><a href="#living-room-sunlight-klx" id="toc-living-room-sunlight-klx" class="nav-link" data-scroll-target="#living-room-sunlight-klx">Living room sunlight (klx)</a></li>
  <li><a href="#living-room-noise-db" id="toc-living-room-noise-db" class="nav-link" data-scroll-target="#living-room-noise-db">Living room noise (dB)</a></li>
  <li><a href="#kitchen-sunlight-klx" id="toc-kitchen-sunlight-klx" class="nav-link" data-scroll-target="#kitchen-sunlight-klx">Kitchen sunlight (klx)</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/Bauhaus-InfAR/bauhaus-infar.github.io/edit/main/posts/report_july/index.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/Bauhaus-InfAR/bauhaus-infar.github.io/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Neufert 4.0 July 23 Progress Report</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Neufert 4.0</div>
    <div class="quarto-category">machine learning</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Milan Valášek </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">17 Jul 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>


<style>
    .table tr td, .table tr th {
        padding: .25rem .25rem;
    }
    .table {
        font-size: 0.875em;
    }
    .table-caption, caption {
        text-align: left;
    }
    caption > p {
        display: inline;
    }
</style>
<section id="motivation" class="level2">
<h2 class="anchored" data-anchor-id="motivation">Motivation</h2>
<p>We are attempting to build a deep neural network that would be able to predict likely characteristics of an apartment based solely on data derived from the geometry of its outline as well as basic variables related to the view from the apartment (<em>e.g.</em> whether or not a highway or railway is visible).</p>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<p>We made use of the Neufert 4.0 data based on the <a href="https://zenodo.org/record/7070952">Swiss dwellings dataset</a>. We reviewed the original data, removing duplicates, cleaning the data of errors, and adding apartment and floor outline geometries. The resulting dataset contained 14,607 entries (one per apartment). Based on the data, we calculated 178 features that encoded geometrical and view properties of the individual apartments. These features were used as input variables for the neural network models.</p>
<p>As output variables, we chose a number of continuous and categorical variables:</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-cont" class="anchored">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Table&nbsp;1: Summary table of continuous outcome variables.</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Min</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Q1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Median</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Mean</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Q3</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Max</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Corridor area ratio</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">0.14</td>
<td style="text-align: right;">0.37</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Largest room sunlight</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.40</td>
<td style="text-align: right;">0.65</td>
<td style="text-align: right;">0.72</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">3.93</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Largest room noise</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">33.89</td>
<td style="text-align: right;">41.90</td>
<td style="text-align: right;">40.86</td>
<td style="text-align: right;">49.62</td>
<td style="text-align: right;">71.71</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Largest room kitchen distance</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">0.25</td>
<td style="text-align: right;">0.75</td>
<td style="text-align: right;">1.42</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">142.25</td>
<td style="text-align: right;">33</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Kitchen sunlight</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.80</td>
<td style="text-align: right;">1.62</td>
<td style="text-align: right;">1.81</td>
<td style="text-align: right;">2.56</td>
<td style="text-align: right;">9.55</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-binary" class="anchored">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Table&nbsp;2: Summary table of binary outcome variables.</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Variable</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">No</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Yes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Has loggia</td>
<td style="text-align: right;">9704</td>
<td style="text-align: right;">4903</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bathroom has window</td>
<td style="text-align: right;">3630</td>
<td style="text-align: right;">10977</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-num-room" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/fig-num-room-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Distribution of the `number_of_rooms variable.</figcaption>
</figure>
</div>
</div>
</div>
<p>The dataset was split into a training set (<em>N</em> = 8,744), development set (<em>N</em> = 2,915), and test set (<em>N</em> = 2,915). The development set was used for model evaluation during the hyperparameter tuning stage of the model development.</p>
</section>
<section id="general-neural-network-architecture" class="level2">
<h2 class="anchored" data-anchor-id="general-neural-network-architecture">General neural network architecture</h2>
<p>The chosen neural network consisted of blocs of fully connected layers with L2 regularisation, followed by a dropout layer. For every but the first bloc, we also included a skip connection from the previous bloc. The number of units per layer, the value of regularisation parameter (<span class="math inline">\(\lambda\)</span>), the dropout proportion, as well as the number of blocs in the network were treated as variable hyperparameters. Finally, a single-unit layer for each of the eight outcome variables was added in parallel to the end of the last bloc.</p>
</section>
<section id="hyperparameter-search" class="level2">
<h2 class="anchored" data-anchor-id="hyperparameter-search">Hyperparameter search</h2>
<p>We performed a grid search of the hyperparameter space defined by the following values:</p>
<ul>
<li>Dropout: [0.3, 0.4, 0.5]</li>
<li>L2 regularisation parameter: [0.0001, 0.001, 0.01]</li>
<li>No.&nbsp;of blocs: 1-7</li>
<li>Number of units: [64, 128, 256]</li>
</ul>
<p>The performance of the model was assessed according to the loss calculated on the validation set.</p>
<p>All models were trained using the Adam optimiser with a learning rate of 0.0001 for a maximum of 500 epochs. An early stopping rule was implemented with a patience of 20 epochs and a tolerance of 0.001, meaning that if the validation loss didn’t improve for 20 epochs by more than 0.001, the training of the model was interrupted, reverting to the best weights to date.</p>
</section>
<section id="best-model-architecture" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="best-model-architecture">Best model architecture</h2>
<p>Based on the hyperparameter tuning step described above, we settled on a model with the following characteristics:</p>
<ul>
<li>Dropout: 0.3</li>
<li>L2 regularisation parameter: 0.0001</li>
<li>No.&nbsp;of blocs: 5</li>
<li>Number of units: 256</li>
</ul>
<p>A graphical representation of the model can be found in <a href="#fig-model">Figure&nbsp;2</a> below.</p>
<div class="column-screen-inset">
<div id="fig-model" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="model.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Schema of the best-performing model</figcaption>
</figure>
</div>
</div>
</section>
<section id="model-performance" class="level2">
<h2 class="anchored" data-anchor-id="model-performance">Model performance</h2>
<section id="does-the-apartment-have-a-loggia" class="level3">
<h3 class="anchored" data-anchor-id="does-the-apartment-have-a-loggia">Does the apartment have a loggia?</h3>
<p>In the table below, <strong>sensitivity</strong> refers to the ability of a test to detect and existing effect. If you have COVID, and take a PCR test, how likely is it to come back positive? <strong>Specificity</strong> on the other hand is the test’s ability to accurately reject negative cases. If you do not have COVID, what is the probability that your PCR test comes back negative?</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-loggia" class="anchored">

<table data-quarto-disable-processing="true" class="table table-striped table-condensed" style="margin-left: auto; margin-right: auto;border-bottom: 0;"><caption>Table&nbsp;3:  <p>Performance of the model with respect to the <code>has_loggia</code>
variable.</p> </caption>
 <thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Prediction</div></th>
</tr>
  <tr>
   <th style="text-align:left;">  </th>
   <th style="text-align:left;">  </th>
   <th style="text-align:right;"> Yes </th>
   <th style="text-align:right;"> No </th>
   <th style="text-align:right;"> Total </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;font-weight: bold;">  </td>
   <td style="text-align:left;font-weight: bold;"> Yes </td>
   <td style="text-align:right;"> 700 </td>
   <td style="text-align:right;"> 304 </td>
   <td style="text-align:right;"> 1004 </td>
  </tr>
  <tr>
   <td style="text-align:left;font-weight: bold;"> Truth </td>
   <td style="text-align:left;font-weight: bold;"> No </td>
   <td style="text-align:right;"> 173 </td>
   <td style="text-align:right;"> 1738 </td>
   <td style="text-align:right;"> 1911 </td>
  </tr>
  <tr>
   <td style="text-align:left;font-weight: bold;">  </td>
   <td style="text-align:left;font-weight: bold;"> Total </td>
   <td style="text-align:right;"> 873 </td>
   <td style="text-align:right;"> 2042 </td>
   <td style="text-align:right;"> 2915 </td>
  </tr>
</tbody>
<tfoot>
<tr><td style="padding: 0; " colspan="100%">
<sup></sup> Sensitivity: 69.7%</td></tr>
<tr><td style="padding: 0; " colspan="100%">
<sup></sup> Specificity: 90.9%</td></tr>
<tr><td style="padding: 0; " colspan="100%">
<sup></sup> Accuracy (not appropriate for imbalanced data): 83.6%</td></tr>
</tfoot>
</table>

</div>
</div>
</div>
</section>
<section id="does-the-bathroom-have-a-window" class="level3">
<h3 class="anchored" data-anchor-id="does-the-bathroom-have-a-window">Does the bathroom have a window?</h3>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-bathroom" class="anchored">

<table data-quarto-disable-processing="true" class="table table-striped table-condensed" style="margin-left: auto; margin-right: auto;border-bottom: 0;"><caption>Table&nbsp;4:  <p>Performance of the model with respect to the
<code>bathroom_has_window</code> variable.</p> </caption>
 <thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Prediction</div></th>
</tr>
  <tr>
   <th style="text-align:left;">  </th>
   <th style="text-align:left;">  </th>
   <th style="text-align:right;"> Yes </th>
   <th style="text-align:right;"> No </th>
   <th style="text-align:right;"> Total </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;font-weight: bold;">  </td>
   <td style="text-align:left;font-weight: bold;"> Yes </td>
   <td style="text-align:right;"> 1996 </td>
   <td style="text-align:right;"> 169 </td>
   <td style="text-align:right;"> 2165 </td>
  </tr>
  <tr>
   <td style="text-align:left;font-weight: bold;"> Truth </td>
   <td style="text-align:left;font-weight: bold;"> No </td>
   <td style="text-align:right;"> 342 </td>
   <td style="text-align:right;"> 408 </td>
   <td style="text-align:right;"> 750 </td>
  </tr>
  <tr>
   <td style="text-align:left;font-weight: bold;">  </td>
   <td style="text-align:left;font-weight: bold;"> Total </td>
   <td style="text-align:right;"> 2338 </td>
   <td style="text-align:right;"> 577 </td>
   <td style="text-align:right;"> 2915 </td>
  </tr>
</tbody>
<tfoot>
<tr><td style="padding: 0; " colspan="100%">
<sup></sup> Sensitivity: 92.2%</td></tr>
<tr><td style="padding: 0; " colspan="100%">
<sup></sup> Specificity: 54.4%</td></tr>
<tr><td style="padding: 0; " colspan="100%">
<sup></sup> Accuracy (not appropriate for imbalanced data): 82.5%</td></tr>
</tfoot>
</table>

</div>
</div>
</div>
</section>
<section id="number-of-rooms" class="level3">
<h3 class="anchored" data-anchor-id="number-of-rooms">Number of rooms</h3>
<p>Given the architecture of the network, the model predicted number of rooms as a continuous real number variable. For this reason, we rounded the prediction to whole number. Because the prediction domain was unconstrained, the model could predict a number of rooms smaller than one (this happened on two occasions) or larger than can reasonably be expected (on one occasion, it predicted 13 rooms).</p>
<p>These erroneous predictions aside, the model performance was as shown below:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-rooms" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/fig-rooms-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Confusion matrix of the number of rooms variable.</figcaption>
</figure>
</div>
</div>
</div>
<p>The model correctly predicted the number of rooms for 75.5% of the cases, with only 21 (0.72%) of predictions falling outside of the truth±1 range.</p>
</section>
<section id="continuous-variables" class="level3">
<h3 class="anchored" data-anchor-id="continuous-variables">Continuous variables</h3>
<p>The sections below provide a summary of the model performance on continuous variables. The scatter plots show the relationship between the model prediction and the ground truth based on the test set. Included in the plot is a OLS line of best fit along with an 80% prediction interval.</p>
<p>The <em>R</em><sup>2</sup> statistic can be interpreted as the proportion of variance in the outcome variable accounted for by the predictor. The <em>b</em> coefficients are the intercept and slope of the line of best fit and should ideally have the value of 0 and 1, respectively.</p>
<p>The left plot of the pair includes all data except for the outliers listed below. The plot on the right hand side also excludes observations where the true value is zero.</p>
</section>
<section id="circulation-efficiency" class="level3">
<h3 class="anchored" data-anchor-id="circulation-efficiency">Circulation efficiency</h3>
<p><img src="index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
<p>80% prediction interval = ±0.03</p>
<p><em>n</em>(x=0) = 139</p>
</section>
<section id="kitchen-living-room-distance-m" class="level3">
<h3 class="anchored" data-anchor-id="kitchen-living-room-distance-m">Kitchen-living room distance (m)</h3>
<p><img src="index_files/figure-html/unnamed-chunk-14-2.png" class="img-fluid" width="672"></p>
<p>80% prediction interval = ±0.93</p>
<p><em>n</em>(x=0) = 0</p>
<p><strong>Outliers</strong></p>

<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Prediction
</th>
<th style="text-align:right;">
Truth
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
912
</td>
<td style="text-align:right;">
38.82299
</td>
<td style="text-align:right;">
0.25
</td>
</tr>
<tr>
<td style="text-align:left;">
957
</td>
<td style="text-align:right;">
35.64644
</td>
<td style="text-align:right;">
2.50
</td>
</tr>
</tbody>

</table>
</section>
<section id="living-room-sunlight-klx" class="level3">
<h3 class="anchored" data-anchor-id="living-room-sunlight-klx">Living room sunlight (klx)</h3>
<p><img src="index_files/figure-html/unnamed-chunk-14-3.png" class="img-fluid" width="672"></p>
<p>80% prediction interval = ±0.27</p>
<p><em>n</em>(x=0) = 2</p>
<p><strong>Outliers</strong></p>

<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Prediction
</th>
<th style="text-align:right;">
Truth
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
957
</td>
<td style="text-align:right;">
-7.644796
</td>
<td style="text-align:right;">
1.055584
</td>
</tr>
</tbody>

</table>
</section>
<section id="living-room-noise-db" class="level3">
<h3 class="anchored" data-anchor-id="living-room-noise-db">Living room noise (dB)</h3>
<p><img src="index_files/figure-html/unnamed-chunk-14-4.png" class="img-fluid" width="672"></p>
<p>80% prediction interval = ±7.81</p>
<p><em>n</em>(x=0) = 84</p>
<p><strong>Outliers</strong></p>

<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Prediction
</th>
<th style="text-align:right;">
Truth
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
957
</td>
<td style="text-align:right;">
133.8368
</td>
<td style="text-align:right;">
34.70842
</td>
</tr>
</tbody>

</table>
</section>
<section id="kitchen-sunlight-klx" class="level3">
<h3 class="anchored" data-anchor-id="kitchen-sunlight-klx">Kitchen sunlight (klx)</h3>
<p><img src="index_files/figure-html/unnamed-chunk-14-5.png" class="img-fluid" width="672"></p>
<p>80% prediction interval = ±0.89</p>
<p><em>n</em>(x=0) = 53</p>
<p><strong>Outliers</strong></p>

<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Prediction
</th>
<th style="text-align:right;">
Truth
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
957
</td>
<td style="text-align:right;">
19.02683
</td>
<td style="text-align:right;">
1.564121
</td>
</tr>
</tbody>

</table>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">© 2023 Milan Valášek</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>