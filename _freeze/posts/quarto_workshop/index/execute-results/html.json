{
  "hash": "61fdc1a442fd1fa3baa5101039381975",
  "result": {
    "markdown": "---\ntitle: \"Introduction to literate programming with Quarto\"\nsubtitle: \"InfAR workshop\"\nauthor: Milan\ndate: \"4/27/2023\"\ndate-format: \"D MMM YYYY\"\ncategories: [workshop]\nimage: \"https://miro.medium.com/v2/resize:fit:276/1*BKv7Ak1uR9e_J0ZXaZpxOw.png\"\ntoc: true # should there be a table of contents?\nnumber-sections: true # should section headings be numbered?\nbibliography: references.bib # file with cited literature entries\ncsl: apa.csl # APA 7th citation style\n# csl: ieee.csl # Institute of Electrical and Electronics Engineers citation style\nexecute:\n  warning: false\n  message: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(reticulate)\n```\n:::\n\n\n::: {.callout-note}\nThe above is a code block that contains `R` code that will be evaluated when the document is rendered\n\nThe `reticulate` package allows us to use Python even though the document will be rendered using the `R` package `knitr`. This is so that we can then use `knitr`'s inline code evaluation (see the [Code evaluation section](#sec-eval) below)\n:::\n\n# Level 1 heading\n\n## Level 2 heading\n\n### Level 3 heading\n\n#### Level 4 heading\n\n##### Level 5 heading\n\n###### Level 6 heading\n\nBody text.\nNew lines get ignored.\nTo start a new paragraph, we need 2 new lines.\n\nThis is now a new paragraph.\n\n# Markdown\n\n## Basic text formatting\n\n<!-- This is a comment. It gets ignored when rendering the document. -->\nItalics (or rather emphasis) is denoted with a single asterisk (\\*) or underscore(\\_) around text, like *this* or _this_.\nWe can add boldface with double asterisks or underscores, like **this** or __this__.\nIn practice, to ease readability of the markdown, I like to use underscores for _emphasis_ and asterisks for **boldface** but that's up to you.\nThere's a little side note to using these markdown special characters, so let's add a footnote.[^1]\n\n[^1]: If you want to use _literal_ asterisks or underscores that you don't want to be interpreted as markers of emphasis, you need to _\"escape\"_ them using a backslash, like this: `\\*` and `\\_`. The same goes for all other special characters.\n\nFor a slightly more exotic formatting, use double tilde (\\~~) for ~~strikethrough~~ and backticks (\\`) for `monospace font` often used for code (watch out, these are not quotes or apostrophes).\nThe particular flavour of markdown used by Quarto also supports ^superscripts^ and ~subscripts~.\n\nFor situations when you want to show a block of code, you can use text offset by four spaces\n\n    This is a block of monospace text you can use to show code.\n    There are, however better options that we'll talk about later.\n\nYou can also make use of the built in syntax highlighting (supports over 140 languages) by enclosing your code in a backtick fence:\n\n<!-- the python tells the rendered what language the code is supposed to be so that it highlights it accordingly -->\n```python\n### Python sample code ###\n\nimport numpy as np\n\n# basic for-loop\nfor i in range(0, 10):\n    print(i)\n```\n\n```js\n/// JavaScript sample code ///\n\n// arrow function (ES6 on)\nconst greet = (name) => `Hello ${name}`\n\ngreet(\"InfAR\")\n```\n\n```cs\n/// C# sample code ///\n\nvar random = new Random();\nint dice = random.Next(1, 7);   // creates a number between 1 and 6 \n```\n\n> You can also use blockquote like this where you can quote an entire paragraph, if you so wish.\n\nTo end these kinds of formatting blocks, just insert a couple of new lines.\n\n## Lists\n\nThere are two kinds of lists: unordered (bullet points) and ordered (numbered/lettered).\n\n- This\n- is\n- an unordered\n- list\n    - supports multiple\n        - levels\n\n<!-- Just put 1s everywhere, the rendered will take care of the actual numbering -->\n1. This\n1. is\n1. an ordered list\n    1. again, with levels\n        - unordered and ordered lists can be combined\n\na. this\na. is\na. also an ordered list\n\n## Links and images\n\nIf you want to include hyperlinks in your document, there are a couple of options.\nFirst, you can simply write out the URL, such as https://www.quarto.org.\nA slightly better way is to link the URL to some informative text.\nTo learn more, visit the [Quarto documentation page](https://www.quarto.org).\n\n![Image caption (optional)](img/sven.jpg){#fig-sven}\n\n<!-- content within the ::: fence will have a 3-column layout -->\n::: {layout-ncol=3}\n![A Martin](img/martin.jpg){width=200px #fig-martin}\n\n![A Metadel](img/metadel.jpg){width=200px #fig-metadel}\n\n![An Olaf](img/olaf.jpg){width=200px #fig-olaf}\n:::\n\nFor more options, see the Quatro guide's [section on figures](https://quarto.org/docs/authoring/figures.html)\n\n## Tables\n\n| Name | Race |\n|------|------|\n| Meriadoc | Hobbit |\n| Denethor | Man |\n| Galdriel | Elf (Noldo) |\n| Sauron | Maia |\n| Grishnákh | Orc |\n\n: A sample of characters from Lord of the Rings {#tbl-lotr}\n\n<!-- The above is table caption -->\n\n# Maths\n\n<!-- This is just a little bit of CSS (the scripting language that governs styling in HTML documents) that styles the LaTeX logo below. It is only relevant for HTML output and will be ignored when rendered as PDF or DOCX. -->\n<style>\n    .latex {\n        font-family: \"Times New Roman\";\n        font-weight: bold;\n    }\n\n    .latex sub {\n      margin-left: -0.1667em;\n      margin-right: -0.125em;\n      font-size: 1em;\n    }\n\n    .latex sup {\n      font-size: 0.85em;\n      vertical-align: -.35em;\n      margin-left: -0.36em;\n      margin-right: -0.15em;\n    }\n</style>\n\n<!-- This is a version of the paragraph for HTML and DOCX and is hidden for PDF -->\n:::{.content-hidden when-format=\"pdf\"}\nBy default, Quarto uses MathJax a maths rendering engine similar to [L^A^T~E~X]{.latex} math mode (for those familiar).\n:::\n\n<!-- This shows ONLY in PDF output -->\n:::{.content-hidden unless-format=\"pdf\"}\nBy default, Quarto uses MathJax a maths rendering engine similar to \\LaTeX\\ math mode (for those familiar).\n:::\n\nMaths is indicated by a `$` (inline) or `$$` (block) fence.\nFor instance, `$\\sum x_i - \\bar{x}$` will be rendered as $\\sum x_i - \\bar{x}$, while\n\n<!-- This is a source code block so the maths inside isn't getting interpreted/rendered -->\n```\n$$x = \\frac{-b\\pm\\sqrt{\\Delta}}{2a}$$\n$$\\Delta = b^2 - 4ac$$\n```\n\nproduces blocked maths:\n\n$$x = \\frac{-b\\pm\\sqrt{\\Delta}}{2a}$$\n$$\\Delta = b^2 - 4ac$$\n\nTo align multi-line maths at arbitrary points, use the `aligned` environment, `\\\\` for new line, and the `&` alignment marker:\n\n```\n$$\n\\begin{aligned}\n\\sigma &= \\sqrt{ \\frac{ \\sum_{ i = 0 }^n(x_i - \\bar{x})^2}{n-1}} \\\\\n& = \\sqrt{\\sigma^2}\n\\end{aligned}\n$$\n```\n\n$$\n\\begin{aligned}\n\\sigma &= \\sqrt{ \\frac{ \\sum_{ i = 0 }^n(x_i - \\bar{x})^2}{n-1}} \\\\\n& = \\sqrt{\\sigma^2}\n\\end{aligned}\n$$\n\nYou can go much more complex than that...\n\n```\n$$\n\\begin{aligned}\n\\mathrm{E}(s^2) &= \\mathrm{E}\\Bigg(\\sum_{i=1}^n\\frac{(x_i - \\bar{x})^2}{n-1}\\Bigg)\\\\\n&= \\frac{1}{n-1}\\mathrm{E}\\Bigg(\\sum_{i=1}^nx_i^2 - n\\bar{x}^2\\Bigg)\\\\\n&= \\frac{1}{n-1}\\Bigg[\\sum_{i=1}^n\\mathrm{E}\\big(x_i^2\\big) - n\\mathrm{E}\\big(\\bar{x}^2\\big)\\Bigg]\\\\\n&= \\frac{1}{n-1}\\Bigg[\\sum_{i=1}^n\\Big\\{\\mathrm{Var}(\\bar{x})+\\big[\\mathrm{E}(x_i)\\big]^2\\Big\\} - n\\Big\\{\\mathrm{Var}(\\bar{x})+\\big[\\mathrm{E}(\\bar{x})\\big]^2\\Big\\}\\Bigg]\\\\\n\\end{aligned}\n$$\n```\n\n$$\n\\begin{aligned}\n\\mathrm{E}(s^2) &= \\mathrm{E}\\Bigg(\\sum_{i=1}^n\\frac{(x_i - \\bar{x})^2}{n-1}\\Bigg)\\\\\n&= \\frac{1}{n-1}\\mathrm{E}\\Bigg(\\sum_{i=1}^nx_i^2 - n\\bar{x}^2\\Bigg)\\\\\n&= \\frac{1}{n-1}\\Bigg[\\sum_{i=1}^n\\mathrm{E}\\big(x_i^2\\big) - n\\mathrm{E}\\big(\\bar{x}^2\\big)\\Bigg]\\\\\n&= \\frac{1}{n-1}\\Bigg[\\sum_{i=1}^n\\Big\\{\\mathrm{Var}(\\bar{x})+\\big[\\mathrm{E}(x_i)\\big]^2\\Big\\} - n\\Big\\{\\mathrm{Var}(\\bar{x})+\\big[\\mathrm{E}(\\bar{x})\\big]^2\\Big\\}\\Bigg]\\\\\n\\end{aligned}\n$$\n\n\n# Code evaluation {#sec-eval}\n\nThe real power of Quarto lies in the integration of the markdown-powered text editor and code evaluation.\n\nYou can easily include blocks of actual `R`, Python, Julia, or Observable JS code that will get evaluated before the document gets rendered.\nTo do that, use a code fence with the following syntax:\n\n<!--  The double braces {{}} mean that the code block gets printed out literally and not evaluated. The language used should only be wrapped in a single set of braces, see below -->\n```{{language}}\ncode\n```\n\nSo, if you're writing in Python, we need:\n\n<!-- The \"echo: fenced\" option below is only used for demonstration purposes and should otherwise not be used -->\n\n::: {.cell}\n\n````{.cell-code}\n```{{python}}\ndef greet(whom):\n    return f'Hello {whom}'\n\ngreet(\"InfAR\")\n```\n````\n\n::: {.cell-output .cell-output-stdout}\n```\n'Hello InfAR'\n```\n:::\n:::\n\n\nAs you can see in the rendered document, the code got evaluated and its output inserted under the code block.\n\n## Execution options\n\nYou can change the way code blocks are treated by specifying execution options.\nThis can be done either _globally_ (for all code blocks) in the document header at the very top or _locally_ within a given code block using the `#|` to denote options.\n\nThere are many execution options (see [Quarto documentation](https://quarto.org/docs/computations/execution-options.html)) so I'll just demonstrate how they're used in principle.\nFor instance, if you want the code blocks to be hidden from the rendered document by default while still showing the output of the code, you'd set the `echo` option to `false` in the document header like so:\n\n```yaml\n---\n# other header fields, such as title omitted\nexecute:\n    echo: false\n---\n```\n\nIf, however, you still want to show a particular block of code in the document, you can turn the `echo` option on locally:\n\n```{{language}}\n#| echo: true\n... your code ...\n```\n\n\n::: {.callout-note}\nLocal code block options override global ones for a given block!\n:::\n\n## Inline code (only with `knitr`)\n\nIf you are using `knitr` to evaluate code[^2], you can use its inline code chunks (``r ``)   to insert the output of your code straight into body text:\n\n[^2]: This will happen automatically if the first code block is an `R` block. You can do this even if you want to code in Python and just use the `reticulate` package like we did at the top of this document.\n\nThe line:\n\n<code>The result of the code above is &#96;r py$greet(\\'InfAR\\')&#96;</code>.[^3]\n\n[^3]: Because we are primarily using `R` here and interfacing with Python via the `reticulate` package, all objects that are created in Python are stored inside of `py`. This is why we are calling the `greet()` function from inside the `py` object in `R` using `py$greet()`. We are doing this because, unfortunately, there is no elegant way in Quarto to print out inline code like this when using Python natively (through the Jupyter engine).\n\nwill produce:\n\nThe result of the code above is Hello InfAR.\n\n## Tables and figures\n\nUsing code blocks, it's very easy to tabulate and plot your data.\n\nHere is a quick example of a scatterplot in Python.\nNotice the options in the source document that govern what the figure cation should be and where it should be positioned as well as set the label for the figure that can then be referenced as @fig-peng (see @sec-crossrefs).\n\n\n::: {.cell .fig-cap-location-bottom}\n\n```{.python .cell-code}\nimport pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\npenguins_url =  \"https://gist.githubusercontent.com/slopp/ce3b90b9168f2f921784de84fa445651/raw/4ecf3041f0ed4913e7c230758733948bc561f434/penguins.csv\"\ndf = pd.read_csv(penguins_url)\n\nplot = sns.lmplot(x=\"body_mass_g\", y=\"bill_length_mm\",\n                  data=df, fit_reg=True, hue='species', legend=False)\nplt.legend(loc='lower right')\nplt.xlabel('Body mass (g)')\nplt.ylabel('Bill length (mm)')\nplt.show()\n```\n\n::: {.cell-output-display}\n![Relationship between bill length and body mass by penguin species](index_files/figure-html/fig-peng-1.png){#fig-peng width=480}\n:::\n:::\n\n\nAnd here is a nice HTML table using `R` and its `kableExtra` package.\n\n\n::: {#tbl-peng .cell tbl-cap='Summary of body mass (g) by penguin species'}\n\n```{.r .cell-code}\nlibrary(kableExtra)\nlibrary(dplyr)\n\npenguins_url =  \"https://gist.githubusercontent.com/slopp/ce3b90b9168f2f921784de84fa445651/raw/4ecf3041f0ed4913e7c230758733948bc561f434/penguins.csv\"\nread.csv(penguins_url) |>\n    dplyr::group_by(species) |>\n    dplyr::summarise(\n        m_mass = mean(body_mass_g, na.rm=TRUE),\n        sd_mass = sd(body_mass_g, na.rm=TRUE),\n    ) |>\n    kableExtra::kbl(\n        digits = 2,\n        col.names = c(\"Species\", \"_M_\", \"_SD_\"), # you can even use markdown\n        format = \"markdown\") |>                  # provided you specify format\n    kableExtra::kable_styling(bootstrap_options = \"striped\")\n```\n\n::: {.cell-output-display}\n|Species   |     _M_|   _SD_|\n|:---------|-------:|------:|\n|Adelie    | 3700.66| 458.57|\n|Chinstrap | 3733.09| 384.34|\n|Gentoo    | 5076.02| 504.12|\n:::\n:::\n\n\n# Academic writing\n\n## Cross-references {#sec-crossrefs}\n\nYou can refer to a section in your document by adding a section label `{#sec-label}` to the section heading and then referring to this label with an `@sec-label` (see @sec-crossrefs).\nSimilarly, you can refer to any images, figures (@fig-olaf), or tables (@tbl-lotr).\n\n::: {.callout-important}\nThe `#sec-` for sections, `#fig-` for figures and images, and `#tbl-` for tables is required.\n:::\n\n## Citing literature\n\n@bielikInvestigatingEffectUrban2015 say this is fine.\nThat, however, is probably balls [@schneiderParametricExplorationSpatial2012; @bielikEvolvingConfigurationalProperties2019]\nKönig, Bielik, and Schneider also say: \"oh man, whatever...\" [-@koenigSystemDynamicsModeling2018 p. 42]\nFinally, Osintseva and colleagues [-@osintsevaAutomatedParametricBuilding2020] went to the pub.\n\nAll cited sources will automatically be included in the list of references at the bottom of the document.\n\n# Post script\n\nThis was just a small taster covering the very basics of what you can do with Quarto.\nFor a deeper dive, I strongly encourage you to check out the [documentation](https://quarto.org/docs/guide/)!\n\n# References {.unnumbered}",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}